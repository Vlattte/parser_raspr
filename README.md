# VEGA_rasp_parser

Парсер загруженного с сайта ВЕГИ расписания

## Подготовка

### ФАЙЛ КОНФИГУРАЦИИ

Для соединения с нужной базой данных нужно создать файл ".env" со следующими полями подключения к БД:

```ini
DB_USER='postgres'
DB_NAME='postgres'
DB_PASSWORD='postgres'
DB_HOST='localhost'
DB_PORT='5432'

# делать дамп - 1, другие значения, либо отсутствие параметра
# не делать дамп
DB_DUMP=0

#################################################################################################################
# ПРИ ЗАПУСКЕ ДВУХ РАЗНЫХ СЕМЕСТРОВ НЕ МИНУЕМА ОШИБКА, так как будет использован семестр из DEFAULT_FILENAME!!! #
#################################################################################################################

# делать очистку таблиц - 1, другие значения, либо отсутствие параметра
# не делать
PRE_CLEAR=0

# имена файлов для парсинга расписания
# если какого-то нет, то такое расписание не парсим
# DEFAULT_FILENAME - расписание пар в семестре
# SESSION_FILENAME - расписание пар в сессию
DEFAULT_FILENAME="test_rasp_files/2024autD.xlsx"
SESSION_FILENAME="test_rasp_files/zex202425win4.xlsx"

# даты в формате "год-месяц-день"
# START_DATE - первый день семестра(сессии), END_DATE - последний день семестра(сессии)
# нужны для генерации таблицы дней и должны начинаться в день начала обучения бакалавров и кончаться последним днем учебы магистров
# для сесси просто день первого зачета это START_DATE, день последнего экзамена - END_DATE
# если парсятся сразу и семестр и сессия, то можно поставить началом первый день семестра, а последним днем поставить последний день сессии
START_DATE="2024-09-02"
END_DATE="2025-02-02"

# первый день обучения для магистров
MAGIC_START_DATE="2024-09-09"

# промежуток, который перезапишется в базе
OVERWRITE_DAY_START="2024-09-09"
OVERWRITE_DAY_END="2024-12-28"
```

#### Создание таблиц

psql -U postgres -d postgres -a -f [путь_до_файла_rasp.sql]

#### Установка зависимостей

pip install -r requirements.txt

## Запуск

python run_parser.py

## Дополнительные сведения

### Worktypes (типы пар)

```python
    - 0-пр, 1-лк, 2-лб
    - 10-конс, 11-экз, 12-зaч, 13-зaч-д
    - 14-кр, 15-кп
```
